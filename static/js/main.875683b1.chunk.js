(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{19:function(e,t,a){e.exports={form:"Style_form__3p0rA",form__header:"Style_form__header__45PX6",form__title:"Style_form__title__3k9-3",form__input:"Style_form__input__1KcLY",form__button:"Style_form__button__2o9Qi"}},2:function(e,t,a){e.exports={header:"style_header__1xTtm",container:"style_container__1jYgO",authlink:"style_authlink__r-LM8",homelink:"style_homelink__3FP0L",activeLink:"style_activeLink__2wEze",userMenu:"style_userMenu__D55bb",userAvatar:"style_userAvatar__3w2km",logOutButton:"style_logOutButton__3zMBu",homeWrap:"style_homeWrap__3Jf50",homeTitle:"style_homeTitle__u2W02",homeText:"style_homeText__B0a8g",registerWrap:"style_registerWrap__2ubbV",registerForm:"style_registerForm__2I4tz",registerTitle:"style_registerTitle__19sP7",registerText:"style_registerText__2lcBo",registerInput:"style_registerInput__wdyl0",registerLabel:"style_registerLabel__2KBz4",registerButton:"style_registerButton__2oPSe"}},23:function(e,t,a){e.exports={filter__title:"style_filter__title__1en6j",filter__input:"style_filter__input__3zrnY",contacts__title:"style_contacts__title__pDn4t"}},28:function(e,t,a){e.exports={contact__button:"style_contact__button__3QP-a",contacts__list:"style_contacts__list__2n5EY",contacts__item:"style_contacts__item__kmEvq"}},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),i=a(15),o=a(4),l=a(27),u=a(5),b=a(40),j=a.n(b),d=a(18),m=a(6),p=a(7),h=Object(u.b)("changeFilter"),O=a(10),f=a.n(O),_=a(17),g=a(14),x=a.n(g);x.a.defaults.baseURL="https://619d60fa131c600017088edc.mockapi.io";var v,y=Object(u.c)("contacts/getContacts",function(){var e=Object(_.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,x.a.get("/contacts");case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()),k=Object(u.c)("contacts/addContacts",function(){var e=Object(_.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,x.a.post("/contacts",t);case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()),N=Object(u.c)("contacts/deleteContacts",function(){var e=Object(_.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,x.a.delete("/contacts/".concat(t));case 4:return r=e.sent,c=r.data.id,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()),w=Object(u.e)({name:"contacts",initialState:{contact:[],loading:!1,error:null},extraReducers:(v={},Object(m.a)(v,y.pending,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loading:!0})})),Object(m.a)(v,y.fulfilled,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{contact:t.payload,loading:!1})})),Object(m.a)(v,y.rejected,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:t.payload})})),Object(m.a)(v,k.pending,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loading:!0})})),Object(m.a)(v,k.fulfilled,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{contact:[].concat(Object(l.a)(e.contact),[t.payload]),loading:!1})})),Object(m.a)(v,k.rejected,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:t.payload})})),Object(m.a)(v,N.pending,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loading:!0})})),Object(m.a)(v,N.fulfilled,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{contact:e.contact.filter((function(e){return e.id!==t.payload})),loading:!1})})),Object(m.a)(v,N.rejected,(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:t.payload})})),v)}).reducer,L=Object(u.d)("",Object(m.a)({},h,(function(e,t){return t.payload}))),C=a(16);x.a.defaults.baseURL="https://connections-api.herokuapp.com";var T,S=function(e){x.a.defaults.headers.common.Authorization="Bearer ".concat(e)},W=function(){x.a.defaults.headers.common.Authorization=""},A=Object(u.c)("auth/register",function(){var e=Object(_.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,x.a.post("/users/signup",t);case 4:return r=e.sent,c=r.data,S(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n(C.b.error("Something went wrong! Please, try one more time")));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),I=Object(u.c)("auth/login",function(){var e=Object(_.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,x.a.post("/users/login",t);case 4:return r=e.sent,c=r.data,S(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n(C.b.error("Wrong email address or password!")));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),B=Object(u.c)("auth/logout",Object(_.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("/user/logout");case 3:W(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))),F=Object(u.c)("auth/refresh",function(){var e=Object(_.a)(f.a.mark((function e(t,a){var n,r,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.getState(),null!==(r=n.auth.token)){e.next=4;break}return e.abrupt("return",a.rejectWithValue());case 4:return S(r),e.prev=5,e.next=8,x.a.get("/users/current");case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",a.rejectWithValue());case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,a){return e.apply(this,arguments)}}()),P=Object(u.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshing:!1},extraReducers:(T={},Object(m.a)(T,A.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(T,I.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(T,B.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(m.a)(T,F.pending,(function(e){e.isRefreshing=!0})),Object(m.a)(T,F.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isRefreshing=!1})),Object(m.a)(T,F.rejected,(function(e){e.isRefreshing=!1})),T)}).reducer,z=Object(l.a)(Object(u.f)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})),R={key:"auth",storage:j.a,whitelist:["token"]},E=Object(u.a)({reducer:{auth:Object(d.g)(R,P),contacts:w,filter:L},middleware:z,devTools:!1}),V=Object(d.h)(E),D=(a(73),a(3)),M=(a(74),function(e){return e.auth.isLoggedIn}),Y=function(e){return e.auth.user.name},J=function(e){return e.auth.isRefreshing},Z=a(1);function q(e){var t=e.component,a=Object(o.c)(M);return Object(Z.jsx)(Z.Fragment,{children:a?Object(Z.jsx)(t,{}):Object(Z.jsx)(D.a,{to:"/"})})}function G(e){var t=e.component,a=e.restricted,n=void 0!==a&&a,r=Object(o.c)(M)&&n;return Object(Z.jsx)(Z.Fragment,{children:r?Object(Z.jsx)(D.a,{to:"/contacts"}):Object(Z.jsx)(t,{})})}var K=a(2),Q=a.n(K),U=function(){var e=Object(o.c)(M);return Object(Z.jsxs)("nav",{children:[Object(Z.jsx)(i.b,{to:"/",className:function(e){return e.isActive?Q.a.activeLink:Q.a.homelink},children:"Home"}),e&&Object(Z.jsx)(i.b,{to:"/contacts",className:function(e){return e.isActive?Q.a.activeLink:Q.a.homelink},children:"Phone-book"})]})},H=a.p+"static/media/big-smile.ac442209.png";function X(){var e=Object(o.b)(),t=Object(o.c)(Y),a=H;return Object(Z.jsxs)("div",{className:Q.a.container,children:[Object(Z.jsx)("img",{src:a,alt:"",width:"40",height:"40",className:Q.a.userAvatar}),Object(Z.jsxs)("span",{className:Q.a.userMenu,children:["Welcome, ",t]}),Object(Z.jsx)("button",{type:"button",onClick:function(){return e(B())},className:Q.a.logOutButton,children:"Log out"})]})}function $(){return Object(Z.jsxs)("div",{className:Q.a.container,children:[Object(Z.jsx)(i.b,{to:"/register",className:Q.a.authlink,children:"Get Started"}),Object(Z.jsx)(i.b,{to:"/login",className:Q.a.authlink,children:"Log in"})]})}function ee(){var e=Object(o.c)(M);return Object(Z.jsxs)("header",{className:Q.a.header,children:[Object(Z.jsx)(U,{}),e?Object(Z.jsx)(X,{}):Object(Z.jsx)($,{})]})}var te=function(){var e=Object(o.c)(M);return Object(Z.jsxs)("div",{className:Q.a.homeWrap,children:[Object(Z.jsx)("h1",{className:Q.a.homeTitle,children:"Welcome to the Phone-book app!"}),Object(Z.jsx)("h2",{className:Q.a.homeText,children:"You would't loose your contacts anymore "}),!e&&Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("span",{role:"img","aria-label":"Greeting icon"}),Object(Z.jsxs)("p",{className:Q.a.homeText,children:["Please, fill in the ",Object(Z.jsx)("b",{children:"Registration form"}),"  or ",Object(Z.jsx)("b",{children:"Log in"})," to have an access to the app "]})]})]})},ae=a(23),ne=a.n(ae),re=a(8),ce=a(26),se=function(e){return e.contacts.contact},ie=Object(ce.a)([se,function(e){return e.filter}],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),oe=a(19),le=a.n(oe);function ue(){var e=Object(o.c)(se),t=Object(o.b)(),a=Object(n.useState)(""),r=Object(re.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),l=Object(re.a)(i,2),u=l[0],b=l[1],j=function(e){"name"===e.currentTarget.name?s(e.currentTarget.value):"number"===e.currentTarget.name&&b(e.currentTarget.value)};return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)("form",{onSubmit:function(a){a.preventDefault(),e.find((function(e){return e.name.toLowerCase()===c.toLowerCase()}))?alert("".concat(c," is already in contacts.")):(t(k({name:c,number:u})),s(""),b(""))},className:le.a.form,children:[Object(Z.jsx)("h1",{className:le.a.form__header,children:"Phone-book"}),Object(Z.jsxs)("label",{className:le.a.form__title,children:["Name",Object(Z.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,value:c,onChange:j,className:le.a.form__input})]}),Object(Z.jsxs)("label",{className:le.a.form__title,children:["Number",Object(Z.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,value:u,onChange:j,className:le.a.form__input})]}),Object(Z.jsx)("button",{className:le.a.form__button,children:"Add contact"})]})})}var be=a(28),je=a.n(be);function de(){var e=Object(o.b)(),t=Object(o.c)(ie);return Object(n.useEffect)((function(){e(y())}),[e]),Object(Z.jsx)("ul",{className:je.a.contacts__list,children:t.map((function(t){return Object(Z.jsxs)("li",{className:je.a.contacts__item,children:[t.name," : ",t.number,Object(Z.jsx)("button",{type:"button",id:t.id,onClick:function(){e(N(t.id)),e(y())},className:je.a.contact__button,children:"Delete"})]},t.id)}))})}function me(){var e=Object(o.b)();return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)("label",{htmlFor:"search",className:ne.a.filter__title,children:["Find contacts by name",Object(Z.jsx)("input",{autoComplete:"off",id:"search",type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]",onChange:function(t){t.preventDefault(),e(h(t.target.value.toLocaleLowerCase()))},className:ne.a.filter__input})]})})}function pe(){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(ue,{}),Object(Z.jsx)("h2",{className:ne.a.contacts__title,children:"Contacts"}),Object(Z.jsx)(me,{}),Object(Z.jsx)(de,{})]})}function he(){var e=Object(o.b)(),t=Object(n.useState)(""),a=Object(re.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(re.a)(s,2),l=i[0],u=i[1],b=Object(n.useState)(""),j=Object(re.a)(b,2),d=j[0],m=j[1],p=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":return c(n);case"email":return u(n);case"password":return m(n);default:return}};return Object(Z.jsxs)("div",{className:Q.a.registerWrap,children:[Object(Z.jsx)("h1",{className:Q.a.registerTitle,children:"Register"}),Object(Z.jsx)("p",{className:Q.a.registerText,children:"online phone-book"}),Object(Z.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==r.trim()&&""!==l.trim()&&""!==d.trim()?(e(A({name:r,email:l,password:d})),c(""),u(""),m("")):C.b.info("Please, fill in all the fields!")},autoComplete:"off",className:Q.a.registerForm,children:[Object(Z.jsxs)("label",{className:Q.a.registerLabel,children:["Name",Object(Z.jsx)("input",{className:Q.a.registerInput,type:"text",name:"name",value:r,onChange:p})]}),Object(Z.jsxs)("label",{className:Q.a.registerLabel,children:["Email",Object(Z.jsx)("input",{className:Q.a.registerInput,type:"email",name:"email",value:l,onChange:p})]}),Object(Z.jsxs)("label",{className:Q.a.registerLabel,children:["Password",Object(Z.jsx)("input",{className:Q.a.registerInput,type:"password",name:"password",value:d,onChange:p})]}),Object(Z.jsx)("button",{type:"submit",className:Q.a.registerButton,children:"Register"})]})]})}function Oe(){var e=Object(o.b)(),t=Object(n.useState)(""),a=Object(re.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(re.a)(s,2),l=i[0],u=i[1],b=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"email":c(n);break;case"password":u(n);break;default:return}};return Object(Z.jsxs)("div",{className:Q.a.registerWrap,children:[Object(Z.jsx)("h1",{className:Q.a.registerTitle,children:"Login"}),Object(Z.jsx)("p",{className:Q.a.registerText,children:"online phone-book"}),Object(Z.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==r.trim()&&""!==l.trim()?(e(I({email:r,password:l})),c(""),u("")):C.b.info("Please, fill in all the fields correctly!")},autoCorrect:"off",className:Q.a.registerForm,children:[Object(Z.jsxs)("label",{className:Q.a.registerLabel,children:["Email",Object(Z.jsx)("input",{className:Q.a.registerInput,type:"email",name:"email",value:r,onChange:b})]}),Object(Z.jsxs)("label",{className:Q.a.registerLabel,children:["Password",Object(Z.jsx)("input",{className:Q.a.registerInput,type:"password",name:"password",value:l,onChange:b})]}),Object(Z.jsx)("button",{type:"submit",className:Q.a.registerButton,children:"Login"})]})]})}function fe(){var e=Object(o.b)(),t=Object(o.c)(J);return Object(n.useEffect)((function(){e(F())}),[e]),!t&&Object(Z.jsxs)("div",{children:[Object(Z.jsx)(ee,{}),Object(Z.jsxs)(D.d,{children:[Object(Z.jsx)(D.b,{path:"/",element:Object(Z.jsx)(G,{component:te})}),Object(Z.jsx)(D.b,{path:"/register",element:Object(Z.jsx)(G,{restricted:!0,component:he})}),Object(Z.jsx)(D.b,{path:"/login",element:Object(Z.jsx)(G,{redirectTo:"/contacts",restricted:!0,component:Oe})}),Object(Z.jsx)(D.b,{path:"/contacts",element:Object(Z.jsx)(q,{redirectTo:"/login",component:pe})})]}),Object(Z.jsx)(C.a,{autoClose:3e3})]})}var _e=a(41);s.a.render(Object(Z.jsx)(r.a.StrictMode,{children:Object(Z.jsx)(o.a,{store:E,children:Object(Z.jsx)(_e.a,{loading:null,persistor:V,children:Object(Z.jsx)(i.a,{children:Object(Z.jsx)(fe,{})})})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.875683b1.chunk.js.map